local VenyxLibrary = loadstring(game:HttpGet("https://raw.githubusercontent.com/Documantation12/Universal-Vehicle-Script/main/Library.lua"))()
local Venyx = VenyxLibrary.new("Universal Vehicle Script", 5013109572)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

local Theme = {
	Background = Color3.fromRGB(61, 60, 124),
	Glow = Color3.fromRGB(60, 63, 221),
	Accent = Color3.fromRGB(55, 52, 90),
	LightContrast = Color3.fromRGB(64, 65, 128),
	DarkContrast = Color3.fromRGB(32, 33, 64),
	TextColor = Color3.fromRGB(255, 255, 255)
}

for index, value in pairs(Theme) do
	pcall(Venyx.setTheme, Venyx, index, value)
end

local function GetVehicleFromDescendant(Descendant)
	return Descendant:FindFirstAncestor(LocalPlayer.Name .. "'s Car")
		or (Descendant:FindFirstAncestor("Body") and Descendant:FindFirstAncestor("Body").Parent)
		or (Descendant:FindFirstAncestor("Misc") and Descendant:FindFirstAncestor("Misc").Parent)
		or Descendant:FindFirstAncestorWhichIsA("Model")
end

local function TeleportVehicle(CoordinateFrame: CFrame)
	local Parent = LocalPlayer.Character.Parent
	local Vehicle = GetVehicleFromDescendant(LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid").SeatPart)
	LocalPlayer.Character.Parent = Vehicle

	local success = pcall(function()
		return Vehicle:SetPrimaryPartCFrame(CoordinateFrame)
	end)

	if not success then
		return Vehicle:MoveTo(CoordinateFrame.Position)
	end
end

local vehiclePage = Venyx:addPage("Vehicle", 8356815386)

local usageSection = vehiclePage:addSection("Usage")
local velocityEnabled = true
usageSection:addToggle("Keybinds Active", velocityEnabled, function(v)
	velocityEnabled = v
end)

local flightSection = vehiclePage:addSection("Flight")
local flightEnabled = false
local flightSpeed = 1

flightSection:addToggle("Enabled", false, function(v)
	flightEnabled = v
end)

flightSection:addSlider("Speed", 100, 0, 800, function(v)
	flightSpeed = v / 100
end)

local defaultCharacterParent

RunService.Stepped:Connect(function()
	local Character = LocalPlayer.Character

	if flightEnabled == true then
		if Character then
			local Humanoid = Character:FindFirstChildWhichIsA("Humanoid")
			if Humanoid then
				local SeatPart = Humanoid.SeatPart
				if SeatPart and SeatPart:IsA("VehicleSeat") then
					local Vehicle = GetVehicleFromDescendant(SeatPart)
					if Vehicle and Vehicle:IsA("Model") then
						Character.Parent = Vehicle

						if not Vehicle.PrimaryPart then
							if SeatPart.Parent == Vehicle then
								Vehicle.PrimaryPart = SeatPart
							else
								Vehicle.PrimaryPart = Vehicle:FindFirstChildWhichIsA("BasePart")
							end
						end

						local cf = Vehicle:GetPrimaryPartCFrame()
						Vehicle:SetPrimaryPartCFrame(
							CFrame.new(cf.Position, cf.Position + workspace.CurrentCamera.CFrame.LookVector)
								* CFrame.new(
									(UserInputService:IsKeyDown(Enum.KeyCode.D) and flightSpeed)
										or (UserInputService:IsKeyDown(Enum.KeyCode.A) and -flightSpeed)
										or 0,
									(UserInputService:IsKeyDown(Enum.KeyCode.E) and flightSpeed / 2)
										or (UserInputService:IsKeyDown(Enum.KeyCode.Q) and -flightSpeed / 2)
										or 0,
									(UserInputService:IsKeyDown(Enum.KeyCode.S) and flightSpeed)
										or (UserInputService:IsKeyDown(Enum.KeyCode.W) and -flightSpeed)
										or 0
								)
						)

						SeatPart.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
						SeatPart.AssemblyAngularVelocity = Vector3.new(0, 0, 0)
					end
				end
			end
		end
	else
		if Character then
			Character.Parent = defaultCharacterParent or Character.Parent
			defaultCharacterParent = Character.Parent
		end
	end
end)

local speedSection = vehiclePage:addSection("Acceleration")
local velocityMult = 0.025

speedSection:addSlider("Multiplier (Thousandths)", 25, 0, 50, function(v)
	velocityMult = v / 1000
end)

local velocityEnabledKeyCode = Enum.KeyCode.W

speedSection:addKeybind("Velocity Enabled", velocityEnabledKeyCode, function()
	if not velocityEnabled then return end

	while UserInputService:IsKeyDown(velocityEnabledKeyCode) do
		task.wait()
		local Character = LocalPlayer.Character
		if Character then
			local Humanoid = Character:FindFirstChildWhichIsA("Humanoid")
			if Humanoid then
				local SeatPart = Humanoid.SeatPart
				if SeatPart and SeatPart:IsA("VehicleSeat") then
					SeatPart.AssemblyLinearVelocity *= Vector3.new(1 + velocityMult, 1, 1 + velocityMult)
				end
			end
		end
	end
end, function(v)
	velocityEnabledKeyCode = v.KeyCode
end)

local decelerateSelection = vehiclePage:addSection("Deceleration")
local qbEnabledKeyCode = Enum.KeyCode.S
local velocityMult2 = 0.15

decelerateSelection:addSlider("Brake Force (Thousandths)", velocityMult2 * 1000, 0, 300, function(v)
	velocityMult2 = v / 1000
end)

decelerateSelection:addKeybind("Quick Brake Enabled", qbEnabledKeyCode, function()
	if not velocityEnabled then return end

	while UserInputService:IsKeyDown(qbEnabledKeyCode) do
		task.wait()
		local Character = LocalPlayer.Character
		if Character then
			local Humanoid = Character:FindFirstChildWhichIsA("Humanoid")
			if Humanoid then
				local SeatPart = Humanoid.SeatPart
				if SeatPart and SeatPart:IsA("VehicleSeat") then
					SeatPart.AssemblyLinearVelocity *= Vector3.new(1 - velocityMult2, 1, 1 - velocityMult2)
				end
			end
		end
	end
end, function(v)
	qbEnabledKeyCode = v.KeyCode
end)

decelerateSelection:addKeybind("Stop the Vehicle", Enum.KeyCode.P, function()
	if not velocityEnabled then return end

	local Character = LocalPlayer.Character
	if Character then
		local Humanoid = Character:FindFirstChildWhichIsA("Humanoid")
		if Humanoid then
			local SeatPart = Humanoid.SeatPart
			if SeatPart and SeatPart:IsA("VehicleSeat") then
				SeatPart.AssemblyLinearVelocity = Vector3.zero
				SeatPart.AssemblyAngularVelocity = Vector3.zero
			end
		end
	end
end)

local springSection = vehiclePage:addSection("Springs")

springSection:addToggle("Visible", false, function(v)
	local Character = LocalPlayer.Character
	if Character then
		local Humanoid = Character:FindFirstChildWhichIsA("Humanoid")
		if Humanoid then
			local SeatPart = Humanoid.SeatPart
			if SeatPart and SeatPart:IsA("VehicleSeat") then
				local Vehicle = GetVehicleFromDescendant(SeatPart)
				for _, s in ipairs(Vehicle:GetDescendants()) do
					if s:IsA("SpringConstraint") then
						s.Visible = v
					end
				end
			end
		end
	end
end)

repeat task.wait() until game:IsLoaded()

if game.PlaceId == 3351674303 then
	local page = Venyx:addPage("Wayfort", 8357222903)
	local section = page:addSection("Vehicle Dealership")
	local list = {}

	for _, v in ipairs(workspace.Game.Dealerships.Dealerships:GetChildren()) do
		table.insert(list, v.Name)
	end

	section:addDropdown("Dealership", list, function(v)
		game.ReplicatedStorage.Remotes.Location:FireServer("Enter", v)
	end)
end

local infoPage = Venyx:addPage("Information", 8356778308)
local discordSection = infoPage:addSection("Discord")

discordSection:addButton("Copy Discord Link", function()
	setclipboard("https://www.discord.com/invite/ENHYznSPmM")
end)

UserInputService.InputBegan:Connect(function(input, gp)
	if not gp and input.KeyCode == Enum.KeyCode.RightBracket then
		Venyx:toggle()
	end
end)
